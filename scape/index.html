<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <title></title>
    <meta charset="utf-8" />
    <meta name="mark" content="">
    <script src="lgis/lgis.js"></script>
    <link href="assets/css/base.css" rel="stylesheet" />
    <link rel="stylesheet" href="assets/css/zebra_dialog.css">
    <link rel="stylesheet" href="assets/css/mc_map.css?t=3">
    <link href="assets/css/style.css" rel="stylesheet" />
    <script type="text/javascript" src="https://3gimg.qq.com/lightmap/components/geolocation/geolocation.min.js"></script>
</head>
<body>
    <div style="display:none" >
         智能导航系统，搜索中心内部商铺及公共设施，跨楼层规划路线！
    </div>
    <div class="sear_f_box">
        <div class="sear_con">
            <div class="s_map icon-back" data-type="back"></div>
            <div class="search">
                <!--<h2 class="ipt_sear_default ipt_sear" data-href="#p=map_p3" data-type="a">搜店名、查设施、找优惠</h2>-->
                <input type="text" id="searIptTxt" class="ipt_sear_default ipt_sear"/>
            </div>
        </div>
        <div class="f_num" id="changeFloor"  style="display:none;width: 0px;">L1</div>
    </div>
    <div class="map_loca icon-compass" ><i></i></div>
    <div id="scene"></div>
    <div id="map"></div>
    <div class="cautionbox loadNav" style="display:none" id="load_nav">
        <img src="assets/images/maps/loading.gif" class="loading">
        <p>正在进行路径规划<br />请稍等...</p>
    </div>
    <div id="publicList">
        <div class="servicebar">
            <ul class="s_search clearfixed">
                <!-- <li data-type="1"><i class="-wc"></i>卫生间</li>
                <li data-type="2"><i class="-ladder"></i>直梯</li>
                <li data-type="3"><i class="-escalator"></i>扶梯</li>
                <li data-type="4"><i class="-stairs"></i>楼梯</li>
                <li data-type="5"><i class="-helpdesk"></i>服务台</li>
                <li data-type="6"><i class="-cashier"></i>收银台</li>
                -->
            </ul>
        </div>
    </div>
    <div id="searchList">
        <div id="sear_list" class="sear_sugg_list" style="display: block;">
            <ul>
                <!--<li data-id="71897" data-name="辽河渡口" data-fid="3" data-x="0" data-y="0"><i class="icon_sp1 date-icon"></i><span><em>辽河渡口</em>本帮江浙菜  L3</span></li>
                <li data-id="71852" data-name="C O V A" data-fid="1" data-x="0" data-y="0"><i class="icon_sp1 date-icon"></i><span><em>C O V A</em>烧烤  L2</span></li>
                <li data-id="71832" data-name="靠得住" data-fid="0" data-x="0" data-y="0"><i class="icon_sp1 date-icon"></i><span><em>靠得住</em>粤菜  </span></li>
                <li data-id="71829" data-name="匠艺,匠艺钟表维修中心" data-fid="3" data-x="0" data-y="0"><i class="icon_sp1 date-icon"></i><span><em>匠艺,匠艺钟表维修中心</em>维修/加工  L3</span></li>
                <li data-id="71815" data-name="柏菲粤品" data-fid="3" data-x="0" data-y="0"><i class="icon_sp1 date-icon"></i><span><em>柏菲粤品</em>粤菜  L3</span></li>
                <li data-id="71811" data-name="胡同烧肉" data-fid="1" data-x="0" data-y="0"><i class="icon_sp1 date-icon"></i><span><em>胡同烧肉</em>烧烤  L2</span></li>-->
            </ul>
        </div>
    </div>
    <div id="resultList">

    </div>
    <div class="mapslidewrap">
        <div class="panel_1" style="display: block;">
            <div class="map_loca icon-measure" id="mapLocal"><i></i></div>
            <div class="map_scaleCtrl" style="width: 68.3898px;">
                <div class="text">20米</div>
                <div class="hBar"></div>
                <div class="lBar"></div>
                <div class="rBar"></div>
            </div>
        </div>
        <!-- 搜索面板 -->
        <div class="mapInfor" id="mapsear_1" style="display:none;">
            <div class="swiper-container">
                <div class="swiper-wrapper"></div>
            </div>
        </div>
        <!-- 临时面板 -->
        <div class="mapInfor" id="mapsear_2" style="display:none;"></div>
    </div>
    <div id="shopDetail"></div>
    <div id="floorPanel"></div>
    <!--<button id="solveRoutesBtn" style="position:absolute;top:100px;left:100px;background:red;">路径分析</button>-->
    <div id="panel_nav_tab" class="floorPop">
        <div class="closeBtn" id="quitNav"><span></span></div>
        <div class="routelist">
            <ul style="width: 236px;">
                <li class="cur" data-step="0" data-f="3">
                    <span class="floornum">L3</span>
                    <i class="s_map"></i>
                </li>
                <li class="" data-step="1" data-f="0">
                    <span class="floornum">L1</span><i class="s_map"></i>
                </li>
            </ul>
        </div>
    </div>
    <div id="routeStart"></div>
    <div id="routeInput"></div>
    <div id="routeSelect"></div>
    <div id="locateSelect"></div>
    <duv id="mapTool" class="mapTool" style="position:absolute;bottom: 45%;right: 10px;">
        <ul>
            <li data-target="locate">
                <img src="assets/images/icon/i_locate.png">
            </li>
        </ul>
    </duv>
    <audio id="video1" controls="controls" style="display:none"></audio>
    <div id="apptip" style="position:absolute;width:100%;top:40%;background: #ffffff4d; height: 50px;"></div>

    <script src="assets/config.js"></script>

    <script src="assets/js/plugins/zepto/zepto.min.js"></script>
    <script src="assets/js/plugins/zepto/fx.js"></script>
    <script src="assets/js/plugins/zepto/touch.js"></script>
    <script src="assets/js/plugins/zepto/data.js"></script>

    <script src="assets/js/plugins/zebra_dialog.src.js"></script>
    <script src="assets/js/plugins/hammer.min.js"></script>
    <script src="assets/js/plugins/swiper.jquery.min.js"></script>
    <link href="assets/js/plugins/mobiscroll/mobiscroll.frame.css" rel="stylesheet" type="text/css" />
    <link href="assets/js/plugins/mobiscroll/mobiscroll.scroller.css" rel="stylesheet" type="text/css" />
    <script src="assets/js/plugins/mobiscroll/mobiscroll.zepto.js"></script>
    <script src="assets/js/plugins/mobiscroll/mobiscroll.core.js"></script>
    <script src="assets/js/plugins/mobiscroll/mobiscroll.frame.js"></script>
    <script src="assets/js/plugins/mobiscroll/mobiscroll.scroller.js"></script>
    <script src="assets/js/plugins/mobiscroll/mobiscroll.select.js"></script>
    <script src="assets/js/plugins/mobiscroll/mobiscroll.i18n.zh.js"></script>

    <script src="assets/js/btts.js"></script>
    <script src="assets/js/base.js"></script>
    <script src="assets/js/gis.js"></script>
    <script src="assets/js/main.js"></script>
    <script>
        app.init();
    </script>
    <script type="text/javascript"> 
        var x_PI = 3.14159265358979324 * 3000.0 / 180.0;
        var PI = 3.1415926535897932384626;
        var a = 6378245.0;
        var ee = 0.00669342162296594323;
        function gcj02towgs84(lng, lat) { 
        if (out_of_china(lng, lat)) {
        return [lng, lat]
        }
        else {
        var dlat = transformlat(lng - 105.0, lat - 35.0);
        var dlng = transformlng(lng - 105.0, lat - 35.0);
        var radlat = lat / 180.0 * PI;
        var magic = Math.sin(radlat);
        magic = 1 - ee * magic * magic;
        var sqrtmagic = Math.sqrt(magic);
        dlat = (dlat * 180.0) / ((a * (1 - ee)) / (magic * sqrtmagic) * PI);
        dlng = (dlng * 180.0) / (a / sqrtmagic * Math.cos(radlat) * PI);
        mglat = lat + dlat;
        mglng = lng + dlng;
        return [lng * 2 - mglng, lat * 2 - mglat]
        }
        }
        function transformlat(lng, lat) { 
        var ret = -100.0 + 2.0 * lng + 3.0 * lat + 0.2 * lat * lat + 0.1 * lng * lat + 0.2 * Math.sqrt(Math.abs(lng));
        ret += (20.0 * Math.sin(6.0 * lng * PI) + 20.0 * Math.sin(2.0 * lng * PI)) * 2.0 / 3.0;
        ret += (20.0 * Math.sin(lat * PI) + 40.0 * Math.sin(lat / 3.0 * PI)) * 2.0 / 3.0;
        ret += (160.0 * Math.sin(lat / 12.0 * PI) + 320 * Math.sin(lat * PI / 30.0)) * 2.0 / 3.0;
        return ret
        }
        function transformlng(lng, lat) { 
        var ret = 300.0 + lng + 2.0 * lat + 0.1 * lng * lng + 0.1 * lng * lat + 0.1 * Math.sqrt(Math.abs(lng));
        ret += (20.0 * Math.sin(6.0 * lng * PI) + 20.0 * Math.sin(2.0 * lng * PI)) * 2.0 / 3.0;
        ret += (20.0 * Math.sin(lng * PI) + 40.0 * Math.sin(lng / 3.0 * PI)) * 2.0 / 3.0;
        ret += (150.0 * Math.sin(lng / 12.0 * PI) + 300.0 * Math.sin(lng / 30.0 * PI)) * 2.0 / 3.0;
        return ret
        }
        /**
        * �ж��Ƿ��ڹ��ڣ����ڹ�������ƫ��
        * @param lng
        * @param lat
        * @returns {boolean}
        */
        function out_of_china(lng, lat) { 
        return (lng < 72.004 || lng > 137.8347) || ((lat < 0.8293 || lat > 55.8271) || false);
        }
    </script> 
</body>
</html>
